<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avatar Quiz - Der Herr der Elemente & Korra</title>

    <!-- Tailwind CSS für Styling -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- React & ReactDOM von CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <!-- Babel für JSX-Transformation -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
            'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
            sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
    </style>
</head>
<body>
<!-- Hier wird die React-App eingehängt -->
<div id="root"></div>

<!-- Die Quiz-Anwendung -->
<script type="text/babel">
    const { useState, useEffect } = React;

    // Alle Quiz-Fragen
    const quizQuestions = [
        {
            question: "Wie viele Elemente gibt es in der Welt von Avatar?",
            answers: ["Drei", "Vier", "Fünf", "Sechs"],
            correct: 1,
            series: "ATLA"
        },
        {
            question: "Wie heißt Aangs fliegender Bison?",
            answers: ["Momo", "Appa", "Naga", "Pabu"],
            correct: 1,
            series: "ATLA"
        },
        {
            question: "Welches Element konnte Aang am Anfang der Serie bändigen?",
            answers: ["Wasser", "Erde", "Feuer", "Luft"],
            correct: 3,
            series: "ATLA"
        },
        {
            question: "Wie heißt Zukos Onkel?",
            answers: ["Ozai", "Iroh", "Roku", "Sozin"],
            correct: 1,
            series: "ATLA"
        },
        {
            question: "Welche Stadt wird als 'uneinnehmbar' bezeichnet?",
            answers: ["Omashu", "Ba Sing Se", "Republica", "Zaofu"],
            correct: 1,
            series: "ATLA"
        },
        {
            question: "Wie heißt die spezielle Wasserbändiger-Technik, mit der man Blut kontrollieren kann?",
            answers: ["Blutbändigen", "Blitzbändigen", "Metallbändigen", "Energiebändigen"],
            correct: 0,
            series: "ATLA"
        },
        {
            question: "Wie heißt das blinde Erdbändiger-Mädchen, das Aang trainiert?",
            answers: ["Suki", "Mai", "Ty Lee", "Toph Beifong"],
            correct: 3,
            series: "ATLA"
        },
        {
            question: "Wer war der Avatar vor Aang?",
            answers: ["Kyoshi", "Roku", "Wan", "Kuruk"],
            correct: 1,
            series: "ATLA"
        },
        {
            question: "Wie heißen die beiden letzten Drachen?",
            answers: ["Ran und Shaw", "Fang und Claw", "Fire und Ice", "Red und Blue"],
            correct: 0,
            series: "ATLA"
        },
        {
            question: "Welche Technik erfindet Toph?",
            answers: ["Sandbändigen", "Lavabändigen", "Metallbändigen", "Kristallbändigen"],
            correct: 2,
            series: "ATLA"
        },
        {
            question: "Wie heißt der Feuerlord, den Aang besiegen muss?",
            answers: ["Sozin", "Azulon", "Ozai", "Zuko"],
            correct: 2,
            series: "ATLA"
        },
        {
            question: "Welche Fähigkeit nutzt Aang, um Ozai zu besiegen ohne ihn zu töten?",
            answers: ["Blutbändigen", "Energiebändigen", "Geistprojektion", "Avatar-Zustand"],
            correct: 1,
            series: "ATLA"
        },
        {
            question: "Wie heißt Sokkas Meister im Schwertkampf?",
            answers: ["Piandao", "Bumi", "Pakku", "Jeong Jeong"],
            correct: 0,
            series: "ATLA"
        },
        {
            question: "Aus welchem Material schmiedet Sokka sein Schwert?",
            answers: ["Stahl", "Eisen", "Meteorit", "Gold"],
            correct: 2,
            series: "ATLA"
        },
        {
            question: "Welcher frühere Avatar gründete die Kyoshi-Insel?",
            answers: ["Avatar Wan", "Avatar Kyoshi", "Avatar Roku", "Avatar Yangchen"],
            correct: 1,
            series: "ATLA"
        },
        {
            question: "Aus welcher Nation stammt Avatar Korra?",
            answers: ["Nördlicher Wasserstamm", "Südlicher Wasserstamm", "Republica", "Erdreich"],
            correct: 1,
            series: "Korra"
        },
        {
            question: "In welcher Stadt finden Korras Abenteuer hauptsächlich statt?",
            answers: ["Ba Sing Se", "Republica", "Zaofu", "Omashu"],
            correct: 1,
            series: "Korra"
        },
        {
            question: "Mit welchem Element hatte Korra am meisten Schwierigkeiten?",
            answers: ["Wasser", "Erde", "Feuer", "Luft"],
            correct: 3,
            series: "Korra"
        },
        {
            question: "Wie heißt Korras Polartiger-Hund?",
            answers: ["Appa", "Momo", "Naga", "Pabu"],
            correct: 2,
            series: "Korra"
        },
        {
            question: "Wer ist der Hauptantagonist in Staffel 1 von Korra?",
            answers: ["Unalaq", "Zaheer", "Kuvira", "Amon"],
            correct: 3,
            series: "Korra"
        },
        {
            question: "Wie heißt Aangs jüngster Sohn?",
            answers: ["Bumi", "Tenzin", "Meelo", "Rohan"],
            correct: 1,
            series: "Korra"
        },
        {
            question: "Wie heißt das Pro-Bending-Team, dem Korra beitritt?",
            answers: ["Die Wolfsbären", "Die Feuerfrettchen", "Die Platypusbären", "Die Tigerdillos"],
            correct: 1,
            series: "Korra"
        },
        {
            question: "Wer war Korras direkter Vorgänger als Avatar?",
            answers: ["Roku", "Kyoshi", "Aang", "Wan"],
            correct: 2,
            series: "Korra"
        },
        {
            question: "Wie heißt der dunkle Geist in Staffel 2?",
            answers: ["Raava", "Vaatu", "Wan Shi Tong", "Koh"],
            correct: 1,
            series: "Korra"
        },
        {
            question: "Welche Fähigkeit entwickelt Zaheer in Staffel 3?",
            answers: ["Blitzbändigen", "Flugfähigkeit", "Lavabändigen", "Geistprojektion"],
            correct: 1,
            series: "Korra"
        },
        {
            question: "Wie heißt die Anführerin des Erdimperiums?",
            answers: ["Suyin", "Lin", "Kuvira", "Opal"],
            correct: 2,
            series: "Korra"
        },
        {
            question: "Wessen Tochter ist Lin Beifong?",
            answers: ["Katara", "Toph", "Suki", "Mai"],
            correct: 1,
            series: "Korra"
        },
        {
            question: "Wie heißt der Geist des Lichts?",
            answers: ["Vaatu", "Raava", "Wan Shi Tong", "La"],
            correct: 1,
            series: "Korra"
        },
        {
            question: "Wie heißt der erste Avatar überhaupt?",
            answers: ["Yangchen", "Kuruk", "Wan", "Szeto"],
            correct: 2,
            series: "Korra"
        },
        {
            question: "Mit wem beginnt Korra am Ende der Serie eine Beziehung?",
            answers: ["Mako", "Bolin", "Asami", "Tahno"],
            correct: 2,
            series: "Korra"
        }
    ];

    // Icon-Komponenten
    const Sparkles = () => (
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
            <path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/>
            <path d="M5 3v4"/>
            <path d="M19 17v4"/>
            <path d="M3 5h4"/>
            <path d="M17 19h4"/>
        </svg>
    );

    const Trophy = () => (
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
            <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/>
            <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/>
            <path d="M4 22h16"/>
            <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/>
            <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/>
            <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/>
        </svg>
    );

    const RotateCcw = () => (
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
            <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
            <path d="M3 3v5h5"/>
        </svg>
    );

    const Check = () => (
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
            <path d="M20 6 9 17l-5-5"/>
        </svg>
    );

    const X = () => (
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
            <path d="M18 6 6 18"/>
            <path d="m6 6 12 12"/>
        </svg>
    );

    // Haupt-Quiz-Komponente
    function AvatarQuiz() {
        const [currentQuestion, setCurrentQuestion] = useState(0);
        const [score, setScore] = useState(0);
        const [selectedAnswer, setSelectedAnswer] = useState(null);
        const [showResult, setShowResult] = useState(false);
        const [quizFinished, setQuizFinished] = useState(false);
        const [shuffledQuestions, setShuffledQuestions] = useState([]);

        useEffect(() => {
            shuffleQuestions();
        }, []);

        const shuffleQuestions = () => {
            const shuffled = [...quizQuestions]
                .sort(() => Math.random() - 0.5)
                .slice(0, 10);
            setShuffledQuestions(shuffled);
        };

        const handleAnswerClick = (index) => {
            if (selectedAnswer !== null) return;

            setSelectedAnswer(index);
            setShowResult(true);

            if (index === shuffledQuestions[currentQuestion].correct) {
                setScore(score + 1);
            }
        };

        const handleNext = () => {
            if (currentQuestion + 1 < shuffledQuestions.length) {
                setCurrentQuestion(currentQuestion + 1);
                setSelectedAnswer(null);
                setShowResult(false);
            } else {
                setQuizFinished(true);
            }
        };

        const resetQuiz = () => {
            shuffleQuestions();
            setCurrentQuestion(0);
            setScore(0);
            setSelectedAnswer(null);
            setShowResult(false);
            setQuizFinished(false);
        };

        if (shuffledQuestions.length === 0) {
            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 flex items-center justify-center">
                    <div className="text-white text-2xl">Lade Quiz...</div>
                </div>
            );
        }

        if (quizFinished) {
            const percentage = (score / shuffledQuestions.length) * 100;
            let message = "";
            if (percentage === 100) message = "Perfekt! Du bist ein wahrer Avatar-Meister! 🏆";
            else if (percentage >= 80) message = "Ausgezeichnet! Du kennst dich sehr gut aus! 🌟";
            else if (percentage >= 60) message = "Gut gemacht! Solides Avatar-Wissen! 👍";
            else if (percentage >= 40) message = "Nicht schlecht! Es gibt noch mehr zu lernen! 📚";
            else message = "Vielleicht Zeit für einen Rewatch? 😊";

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 flex items-center justify-center p-4">
                    <div className="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full text-center">
                        <div className="w-20 h-20 mx-auto mb-4 text-yellow-500 flex items-center justify-center">
                            <Trophy />
                        </div>
                        <h1 className="text-3xl font-bold mb-4 text-gray-800">Quiz beendet!</h1>
                        <div className="text-6xl font-bold mb-4 text-indigo-600">
                            {score}/{shuffledQuestions.length}
                        </div>
                        <p className="text-xl mb-6 text-gray-700">{message}</p>
                        <button
                            onClick={resetQuiz}
                            className="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-3 rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all transform hover:scale-105 flex items-center gap-2 mx-auto"
                        >
                            <div className="w-5 h-5"><RotateCcw /></div>
                            Nochmal spielen
                        </button>
                    </div>
                </div>
            );
        }

        const question = shuffledQuestions[currentQuestion];

        return (
            <div className="min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 flex items-center justify-center p-4">
                <div className="bg-white rounded-2xl shadow-2xl p-8 max-w-2xl w-full">
                    <div className="flex items-center justify-between mb-6">
                        <div className="flex items-center gap-2">
                            <div className="w-6 h-6 text-yellow-500"><Sparkles /></div>
                            <span className="text-sm font-semibold text-gray-600">
                                    Frage {currentQuestion + 1}/{shuffledQuestions.length}
                                </span>
                        </div>
                        <div className="text-sm font-semibold text-indigo-600">
                            Score: {score}
                        </div>
                    </div>

                    <div className="mb-2">
                            <span className={`inline-block px-3 py-1 rounded-full text-xs font-semibold ${
                                question.series === 'ATLA'
                                    ? 'bg-blue-100 text-blue-800'
                                    : 'bg-purple-100 text-purple-800'
                            }`}>
                                {question.series === 'ATLA' ? 'Der Herr der Elemente' : 'Die Legende von Korra'}
                            </span>
                    </div>

                    <h2 className="text-2xl font-bold mb-8 text-gray-800">
                        {question.question}
                    </h2>

                    <div className="space-y-3 mb-6">
                        {question.answers.map((answer, index) => {
                            const isCorrect = index === question.correct;
                            const isSelected = index === selectedAnswer;

                            let bgColor = "bg-gray-50 hover:bg-gray-100";
                            let borderColor = "border-gray-200";
                            let textColor = "text-gray-800";

                            if (showResult) {
                                if (isCorrect) {
                                    bgColor = "bg-green-100";
                                    borderColor = "border-green-500";
                                    textColor = "text-green-800";
                                } else if (isSelected && !isCorrect) {
                                    bgColor = "bg-red-100";
                                    borderColor = "border-red-500";
                                    textColor = "text-red-800";
                                }
                            } else if (isSelected) {
                                bgColor = "bg-indigo-50";
                                borderColor = "border-indigo-400";
                            }

                            return (
                                <button
                                    key={index}
                                    onClick={() => handleAnswerClick(index)}
                                    disabled={showResult}
                                    className={`w-full p-4 rounded-lg border-2 ${bgColor} ${borderColor} ${textColor} transition-all text-left font-medium flex items-center justify-between ${
                                        !showResult ? 'hover:scale-102 cursor-pointer' : 'cursor-default'
                                    }`}
                                >
                                    <span>{answer}</span>
                                    {showResult && isCorrect && <div className="w-5 h-5 text-green-600"><Check /></div>}
                                    {showResult && isSelected && !isCorrect && <div className="w-5 h-5 text-red-600"><X /></div>}
                                </button>
                            );
                        })}
                    </div>

                    {showResult && (
                        <button
                            onClick={handleNext}
                            className="w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all transform hover:scale-105"
                        >
                            {currentQuestion + 1 < shuffledQuestions.length ? 'Nächste Frage' : 'Ergebnis anzeigen'}
                        </button>
                    )}

                    <div className="mt-6 w-full bg-gray-200 rounded-full h-2">
                        <div
                            className="bg-gradient-to-r from-blue-600 to-purple-600 h-2 rounded-full transition-all duration-300"
                            style={{ width: `${((currentQuestion + 1) / shuffledQuestions.length) * 100}%` }}
                        />
                    </div>
                </div>
            </div>
        );
    }

    // Render die App
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<AvatarQuiz />);
</script>
</body>
</html>